name: 'Build and deploy JAR app to Azure Web App: app-pg-rm554773'
 
on:

  push:

    branches: [ main ]

  workflow_dispatch:
 
jobs:

  build-and-deploy:

    runs-on: ubuntu-latest
 
    steps:

      - uses: actions/checkout@v4
 
      - name: Set up Java 17

        uses: actions/setup-java@v4

        with:

          distribution: temurin

          java-version: '17'
 
      - name: Build with Maven

        run: mvn -B clean package
 
      - name: Deploy to Azure Web App

        uses: azure/webapps-deploy@v2

        with:

          app-name: 'app-pg-rm554773'

          slot-name: 'production'

          publish-profile: ${{ secrets.AZUREAPPSERVICE_PUBLISHPROFILE_67232FC381C3401991847FA6E91E2D44 }}

          package: '${{ github.workspace }}/target/*.jar'

 
